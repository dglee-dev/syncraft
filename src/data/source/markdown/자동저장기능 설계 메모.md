---
title: 자동저장기능 설계 메모
category: tech
---


# 자동저장기능 설계 메모

타타타타..

지금처럼 내용을 작성한다.

저장하기 버튼같은건 그냥 아예 없애버리고 맥의 메모장처럼 쓸 수 있을 정도가 되려면 내용이 바뀌는 단위로 다 저장을 해버려야 한다.

이걸 위해서 매번 DB랑 통신을 하면 굉장히 느릴거다. 따라서 먼저 redis에 저장한다.

그리고 소켓이 닫힐 때 redis의 내용을 DB에 동기화시킨다. 굳이 소켓을 써야할까? 소켓을 쓰면 서버에서도 클라이언트에 요청을 보내 '야 응답해, 안해? 안하면 이거 이제 닫고 동기화시킨다' 가 가능한데, 만약 소켓을 안쓰면 클라이언트에서 '야 끝났어' 가 제대로 전달이 안되면 동기화를 꼭 주기적으로 해줘야만 한다. 주기적으로 해주는 것보다 글 작성이 끝났을 때 동기화시키고 redis를 비워주는게 더 부하가 덜한 방법인 것 같다.

근데 글을 쓸때마다 소켓을 열어서 연결을 유지하는건 서버에게 어느정도의 어떤 부하를 주는 일일까?

